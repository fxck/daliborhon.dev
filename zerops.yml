zerops:
  - setup: daliborhondotdev
    # ==== how to build your application ====
    build:
      os: ubuntu
      # what technologies should the build
      # container be based on (can be an array)
      base: nodejs@22

      prepareCommands:
        - apt-get install libc++-dev libc++abi-dev

      # what commands to use to build your app
      buildCommands:
        - pnpm --filter @daliborhon.dev/frontend install
        - pnpm run build:frontend

      # select which files / folders to deploy
      # after the build succesfully finished
      deployFiles:
        - apps/frontend/dist
        - apps/frontend/package.json
        - apps/frontend/node_modules

      # *optional*: which files / folders
      # to cache for the next build run
      # cache:
      #   - node_modules
      #   - package-lock.json

    # ==== how to run your application ====
    run:
      os: ubuntu
      # what technologies should the runtime
      # container be based on (can be array)
      base: nodejs@22

      # what ports your app listens on
      # and whether it supports http traffic
      ports:
        - port: 3000
          httpSupport: true
      envVariables:
        PORT: 3000
        HOST: 0.0.0.0

      # how to start your application
      start: pnpm start:frontend